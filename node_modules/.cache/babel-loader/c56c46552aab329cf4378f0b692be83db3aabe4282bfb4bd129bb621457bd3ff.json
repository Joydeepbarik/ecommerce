{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{ProductsWrapper}from\"../Styles/Products-Style\";import{DataContext}from\"../Layouts/DataContext\";import axios from\"axios\";import{Fetch_Products_Categorywise_URL,Product_Image_URL}from\"../Api/Api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Products(){const{selectedCategory,setCartItems}=useContext(DataContext);const[products,setProducts]=useState([]);useEffect(()=>{axios.get(`${Fetch_Products_Categorywise_URL}?category=${selectedCategory}`).then(res=>{console.log(res);setProducts(res.data.products);}).catch(err=>{console.log(err);setProducts([]);});},[]);const handleAddToCart=product=>{setCartItems(prevProducts=>{const updatedItems=prevProducts.map(item=>item.id===product.id?{...item,quantity:item.quantity+1}// Increment quantity if product exists\n:item);// Match by unique product ID\nif(updatedItems.every(item=>item.id!==product.id)){updatedItems.push({...product,quantity:1});}localStorage.setItem('cartItems',JSON.stringify(updatedItems));// Update localStorage\nreturn updatedItems;// Update state with updatedItems\n});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ProductsWrapper,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper_inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page_head\",children:/*#__PURE__*/_jsx(\"h2\",{children:selectedCategory})}),/*#__PURE__*/_jsx(\"div\",{className:\"products_sec\",children:products.length>0?products.map((product,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"product_box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box_inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inner_top\",children:/*#__PURE__*/_jsx(\"img\",{src:`${Product_Image_URL}/${product.pimage}`,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inner_bottom\",children:[/*#__PURE__*/_jsx(\"h4\",{children:product.pname}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star-half-stroke\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"(32 Customers)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inner_operation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price_sec\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Price (Rs.):\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-indian-rupee-sign\"}),product.price,\" \",selectedCategory==='Electronics'?'':`(${product.unit})`]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn_sec\",children:[/*#__PURE__*/_jsx(\"a\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-heart\"})}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>handleAddToCart(product),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-cart-plus\"})})]})]})]})},index)):/*#__PURE__*/_jsx(\"div\",{className:\"empty_msg\",children:/*#__PURE__*/_jsx(\"p\",{})})})]})})});}export default Products;","map":{"version":3,"names":["useContext","useEffect","useState","ProductsWrapper","DataContext","axios","Fetch_Products_Categorywise_URL","Product_Image_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Products","selectedCategory","setCartItems","products","setProducts","get","then","res","console","log","data","catch","err","handleAddToCart","product","prevProducts","updatedItems","map","item","id","quantity","every","push","localStorage","setItem","JSON","stringify","children","className","length","index","src","pimage","alt","pname","price","unit","onClick"],"sources":["D:/GitHub/E-Commerce/src/Pages/Products.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { ProductsWrapper } from \"../Styles/Products-Style\";\r\nimport { DataContext } from \"../Layouts/DataContext\";\r\nimport axios from \"axios\";\r\nimport { Fetch_Products_Categorywise_URL, Product_Image_URL } from \"../Api/Api\";\r\n\r\n\r\n\r\nfunction Products() {\r\n\r\n    const {selectedCategory, setCartItems} = useContext(DataContext);\r\n    const [products, setProducts] = useState([]);\r\n\r\n    useEffect (() => {\r\n        axios.get(`${Fetch_Products_Categorywise_URL}?category=${selectedCategory}`)\r\n        .then(res => {\r\n            console.log(res);\r\n            setProducts(res.data.products);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            setProducts([]);\r\n        })\r\n    }, []);\r\n\r\n    const handleAddToCart = (product) => {\r\n        setCartItems((prevProducts) => {\r\n            const updatedItems = prevProducts.map((item) => \r\n                item.id === product.id \r\n                    ? { ...item, quantity: item.quantity + 1 }  // Increment quantity if product exists\r\n                    : item\r\n            );// Match by unique product ID\r\n    \r\n            if (updatedItems.every((item) => item.id !== product.id)) {\r\n                updatedItems.push({ ...product, quantity: 1 });\r\n            }\r\n    \r\n            localStorage.setItem('cartItems', JSON.stringify(updatedItems)); // Update localStorage\r\n            return updatedItems; // Update state with updatedItems\r\n        });\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <ProductsWrapper>\r\n                <div className=\"wrapper_inner\">\r\n                    <div className=\"page_head\">\r\n                        <h2>{selectedCategory}</h2>\r\n                    </div>\r\n                    <div className=\"products_sec\">\r\n                        {\r\n                            products.length > 0 ? \r\n                            products.map((product, index) => \r\n                                <div className=\"product_box\" key={index}>\r\n                                    <div className=\"box_inner\">\r\n                                        <div className=\"inner_top\">\r\n                                            <img src={`${Product_Image_URL}/${product.pimage}`} alt=\"\" />\r\n                                        </div>\r\n                                        <div className=\"inner_bottom\">\r\n                                            <h4>{product.pname}</h4>\r\n                                            <div className=\"rating\">\r\n                                                <ul>\r\n                                                    <i className=\"fa-solid fa-star\"></i>\r\n                                                    <i className=\"fa-solid fa-star\"></i>\r\n                                                    <i className=\"fa-solid fa-star\"></i>\r\n                                                    <i className=\"fa-solid fa-star\"></i>\r\n                                                    <i className=\"fa-solid fa-star-half-stroke\"></i>\r\n                                                </ul>\r\n                                                <span>(32 Customers)</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"inner_operation\">\r\n                                            <div className=\"price_sec\">\r\n                                                <p>Price (Rs.):</p>\r\n                                                <span><i className=\"fa-solid fa-indian-rupee-sign\"></i>{product.price} {selectedCategory === 'Electronics' ? '' : `(${product.unit})`}</span>\r\n                                            </div>\r\n                                            <div className=\"btn_sec\">\r\n                                                <a><i className=\"fa-regular fa-heart\"></i></a>\r\n                                                <a onClick={() => handleAddToCart(product)}><i className=\"fa-solid fa-cart-plus\"></i></a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                            :\r\n                            <div className=\"empty_msg\">\r\n                                <p></p>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </ProductsWrapper>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Products;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}