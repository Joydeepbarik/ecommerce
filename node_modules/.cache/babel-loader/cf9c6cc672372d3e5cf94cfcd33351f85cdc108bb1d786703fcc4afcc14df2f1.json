{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{WishlistWrapper}from\"../Styles/Wishlist-Style\";import{DataContext}from\"../Layouts/DataContext\";import axios from\"axios\";import{Add_Wishlist_URL,Delete_Wishlist_URL,Fetch_Wishlist_URL,Product_Image_URL}from\"../Api/Api\";import{use}from\"react\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Bounce}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Wishlist(){const{setSelectedCategory,setCartItems,setConfirmationModalShow,wishlistItems,setWishlistItems}=useContext(DataContext);const[reload,setReload]=useState(false);useEffect(()=>{const login=localStorage.getItem(\"login\");if(login==\"true\"){const user=localStorage.getItem(\"userData\");const userData=JSON.parse(user);axios.get(`${Fetch_Wishlist_URL}?name=${userData.user}`).then(res=>{const products=res.data.wishlist.productlist;const jsonProducts=JSON.parse(products);setWishlistItems(jsonProducts);console.log(jsonProducts);setReload(false);}).catch(err=>{console.log(err);setReload(false);});}},[reload]);const handleDeleteWishlist=product=>{const login=localStorage.getItem(\"login\");if(login==\"true\"){const user=localStorage.getItem(\"userData\");const userData=JSON.parse(user);setWishlistItems(prevItems=>{let updatedWishlist=prevItems.filter(item=>item.id!==product.id);// console.log(updatedWishlist);\nconst inputs={name:userData.user,products:JSON.stringify(updatedWishlist)};axios.post(Add_Wishlist_URL,inputs,{headers:{'Content-Type':'application/json','Accept':'application/json'}}).then(res=>{console.log(res);toast.warn('Item Deleted from Wishlist',{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Bounce});setReload(true);}).catch(err=>{console.log(err);setReload(true);});return updatedWishlist;});}};const handleAddToCart=item=>{setCartItems(prevItems=>{const existingItem=prevItems.find(cartItem=>cartItem.id===item.id);if(existingItem){// Increment quantity if item already in cart\nreturn prevItems.map(cartItem=>cartItem.id===item.id?{...cartItem,quantity:cartItem.quantity+1}:cartItem);}else{// Add new item to the cart\nconst newItem={...item,quantity:1};return[...prevItems,newItem];}});toast.success('Item added to cart!',{position:\"top-right\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(WishlistWrapper,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper_inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page_head\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Wishlist\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"wishlist_sec\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sec_inner\",children:wishlistItems.length>0?wishlistItems.map((item,i)=>{return/*#__PURE__*/_jsx(\"div\",{className:\"sec_box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box_inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img_box\",children:/*#__PURE__*/_jsx(\"img\",{src:`${Product_Image_URL}/${item.pimage}`,alt:\"image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content_box\",children:[/*#__PURE__*/_jsx(\"h5\",{children:item.pname}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price : \",/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-indian-rupee-sign\"}),item.price,\" \",item.pCategory==='Electronics'?'':`(${item.unit})`]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action_box\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>handleAddToCart(item),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-cart-shopping\"})}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>handleDeleteWishlist(item),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash-can\"})})]})]})]})},i);}):/*#__PURE__*/_jsx(\"div\",{className:\"empty_msg\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Please add products to your wishlist.\"})})})})]})})});}export default Wishlist;","map":{"version":3,"names":["useContext","useEffect","useState","WishlistWrapper","DataContext","axios","Add_Wishlist_URL","Delete_Wishlist_URL","Fetch_Wishlist_URL","Product_Image_URL","use","toast","Bounce","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Wishlist","setSelectedCategory","setCartItems","setConfirmationModalShow","wishlistItems","setWishlistItems","reload","setReload","login","localStorage","getItem","user","userData","JSON","parse","get","then","res","products","data","wishlist","productlist","jsonProducts","console","log","catch","err","handleDeleteWishlist","product","prevItems","updatedWishlist","filter","item","id","inputs","name","stringify","post","headers","warn","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","transition","handleAddToCart","existingItem","find","cartItem","map","quantity","newItem","success","children","className","length","i","src","pimage","alt","pname","price","pCategory","unit","onClick"],"sources":["D:/GitHub/E-Commerce/src/Pages/Wishlist.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { WishlistWrapper } from \"../Styles/Wishlist-Style\";\r\nimport { DataContext } from \"../Layouts/DataContext\";\r\nimport axios from \"axios\";\r\nimport { Add_Wishlist_URL, Delete_Wishlist_URL, Fetch_Wishlist_URL, Product_Image_URL } from \"../Api/Api\";\r\nimport { use } from \"react\";\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Bounce } from 'react-toastify';\r\n\r\n\r\nfunction Wishlist() {\r\n\r\n    const {setSelectedCategory, setCartItems, setConfirmationModalShow, wishlistItems, setWishlistItems} = useContext(DataContext);\r\n    const [reload, setReload] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const login = localStorage.getItem(\"login\");\r\n\r\n        if (login == \"true\"){\r\n            const user = localStorage.getItem(\"userData\");\r\n            const userData = JSON.parse(user);\r\n\r\n            axios.get(`${Fetch_Wishlist_URL}?name=${userData.user}`)\r\n            .then(res => {\r\n                const products = res.data.wishlist.productlist;\r\n                const jsonProducts = JSON.parse(products);\r\n                setWishlistItems(jsonProducts);\r\n                console.log(jsonProducts);\r\n                setReload(false);\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                setReload(false);\r\n            })\r\n        }\r\n    }, [reload]);\r\n\r\n    const handleDeleteWishlist = (product) => {\r\n\r\n        const login = localStorage.getItem(\"login\");\r\n    \r\n        if (login == \"true\"){\r\n            const user = localStorage.getItem(\"userData\");\r\n            const userData = JSON.parse(user);\r\n            \r\n            setWishlistItems((prevItems) => {\r\n                let updatedWishlist = prevItems.filter(item => item.id !== product.id);\r\n                // console.log(updatedWishlist);\r\n                \r\n                const inputs = {\r\n                    name: userData.user,\r\n                    products: JSON.stringify(updatedWishlist)\r\n                };\r\n                \r\n                axios.post(Add_Wishlist_URL, inputs, {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Accept': 'application/json'\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    console.log(res);\r\n                    toast.warn('Item Deleted from Wishlist', {\r\n                        position: \"top-right\",\r\n                        autoClose: 5000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                        theme: \"light\",\r\n                        transition: Bounce,\r\n                    });\r\n                    setReload(true);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    setReload(true);\r\n                })\r\n                return updatedWishlist;\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n    const handleAddToCart = (item) => {\r\n        setCartItems(prevItems => {\r\n            const existingItem = prevItems.find(cartItem => cartItem.id === item.id);\r\n            if (existingItem) {\r\n                // Increment quantity if item already in cart\r\n                return prevItems.map(cartItem =>\r\n                    cartItem.id === item.id\r\n                        ? { ...cartItem, quantity: cartItem.quantity + 1 }\r\n                        : cartItem\r\n                );\r\n            } else {\r\n                // Add new item to the cart\r\n                const newItem = { ...item, quantity: 1 };\r\n                return [...prevItems, newItem];\r\n            }\r\n        });\r\n\r\n        toast.success('Item added to cart!', {\r\n            position: \"top-right\",\r\n            autoClose: 3000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n        });\r\n    };\r\n\r\n    return(\r\n        <>\r\n            <WishlistWrapper>\r\n                <div className=\"wrapper_inner\">\r\n                    <div className=\"page_head\">\r\n                        <h2>My Wishlist</h2>\r\n                    </div>\r\n                    <div className=\"wishlist_sec\">\r\n                        <div className=\"sec_inner\">\r\n                            {\r\n                                wishlistItems.length > 0 ? \r\n                                wishlistItems.map((item, i) => {\r\n                                    return(\r\n                                        <div className=\"sec_box\" key={i}>\r\n                                            <div className=\"box_inner\">\r\n                                                <div className=\"img_box\">\r\n                                                    <img src={`${Product_Image_URL}/${item.pimage}`} alt=\"image\" />\r\n                                                </div>\r\n                                                <div className=\"content_box\">\r\n                                                    <h5>{item.pname}</h5>\r\n                                                    <p>Price : <span><i className=\"fa-solid fa-indian-rupee-sign\"></i>{item.price} {item.pCategory === 'Electronics' ? '' : `(${item.unit})`}</span></p>\r\n                                                    <div className=\"action_box\">\r\n                                                        <a onClick={() => handleAddToCart(item)}><i className=\"fa-solid fa-cart-shopping\"></i></a>\r\n                                                        <a onClick={() => handleDeleteWishlist(item)}><i className=\"fa-solid fa-trash-can\"></i></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                                :\r\n                                <div className=\"empty_msg\">\r\n                                    <p>Please add products to your wishlist.</p>\r\n                                </div>\r\n                            }\r\n                           \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </WishlistWrapper>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Wishlist"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}